{% extends "base.html" %}

{% block title %}
Fourfield Snapshot
{% endblock %}

{% block css %}
{% load static %}
<link rel="stylesheet" href="{% static "portfolio_manager/css/fourField.css" %}">
{% endblock %}

{% block javascript %}
{% load static %}
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="{% static 'portfolio_manager/js/colorGenerator.js' %}"></script>
<script src="{% static 'portfolio_manager/js/fourField.js' %}"></script>
<script src="{% static 'portfolio_manager/js/snapshot/snap_fourfield_loader.js' %}"></script>
{% endblock %}

{% load timetags %}
{% block content %}
<div class="text-center">
  <h2>{{ name }}</h2>
  <h5>{{ description }}</h5>
  <!-- Info for the ajax -->
  <input id="dj-data" type="hidden"
      data-url="{% url 'json' %}"
      data-x="{{ x }}"
      data-y="{{ y }}"
      data-r="{{ radius }}"
      data-start="{{ start_date }}"
      data-end="{{ end_date }}"
      data-zoom="{{ zoom }}"
      data-data="{{ data }}">
  <div class="visualizationwrapper">
    <!-- Infopanels at the right side -->
    <div id="snap-info-cont" class="col-lg-2 col-xs-12">
      <div class="panel-group col-xs-10 col-xs-offset-1">
        <div class="panel panel-default">
          <div class="panel-heading">
            X
          </div>
          <div class="panel-body">
            {{ x }}
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            Y
          </div>
          <div class="panel-body">
            {{ y }}
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            Radius
          </div>
          <div class="panel-body">
            {{ radius }}
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            Start date
          </div>
          <div class="panel-body">
            {{ start_date | print_timestamp }}
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            End date
          </div>
          <div class="panel-body">
            {{ end_date | print_timestamp }}
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
            Zoom
          </div>
          <div class="panel-body">
            {{ zoom }}
          </div>
        </div>
      </div>
    </div>
    <!-- Container for visualization -->
    <div class="col-lg-8 col-xs-12" id="visualization">
      <img id="loading-icon" src="{% static 'portfolio_manager/img/loading.gif' %}"/>
    </div>
  </div>
</div>
{% endblock %}
