{% extends "base.html" %}

{# TITLE HERE #}
{% block title %}
Presentation
{% endblock %}

{# CSS HERE #}
{% block css %}
{% load static %}
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="{% static 'portfolio_manager/js/colorGenerator.js' %}"></script>
<script src="{% static 'portfolio_manager/js/presentations/presentation_loader.js' %}"></script>
{% endblock %}

{% block content %}
  <div class="col-lg-3 hidden-md hidden-sm hidden-xs">
    <nav id="spymenu" class="col-lg-8 col-lg-offset-3">
      <ul class="text-center nav nav-pills nav-stacked">
        <li><a href="#summary-wrapper">"Summary"</a></li>
        {% for snap in snapshots %}
          <li><a href="#{{ snap.id }}-wrapper">{{ snap.name }}</a></li>
        {% endfor %}
      </ul>
    </nav>
  </div>
  <div class="col-lg-8 col-xs-12">
    <h2> {{presentation.title}} </h2>
    <div id="summary-wrapper" class="snap-wrapper col-lg-12 col-sm-10">
      {{ presentation.summary }}
    </div>
    {% for snap in snapshots %}
      <input id="visualization-data{{ snap.snap_type }}{{ snap.id }}" type="hidden"
        snap-url="{% url 'json' %}"
        snap-type = "{{ snap.snap_type }}"
        snap-id = "{{ snap.pk }}"
        snap-x = "{{ snap.x_id}}"
        snap-y = "{{ snap.y_id}}"
        snap-start="{{ snap.start_date }}"
        snap-end="{{ snap.end_date }}"
        snap-r = "{{ snap.radius_id}}"
        snap-zoom = "{{ snap.zoom }}"
        snap-project =  "{{ snap.project_id}}"
         >
      <div id="{{ snap.id }}-wrapper" class="snap-wrapper col-lg-12 col-sm-10 col-sm-offset-1">
          <h2>{{ snap.name }}</h2>
          <h5>{{ snap.description }}</h5>
          <div class="col-lg-8 col-xs-12 presentationVisualization" id="visualization{{ snap.snap_type }}{{ snap.id }}" >
            <img id="loading-icon" src="{% static 'portfolio_manager/img/loading.gif' %}"/>
          </div>
      </div>
    {% endfor %}
  </div>
{% endblock %}
